(()=>{"use strict";class t{constructor(){this.boardSize=10,this.coordinates=new Map,this.AttackStorage=[],this.missedAttacks=[],this.playerboard=this.createBoard()}createBoard(){const t=[];for(let e=0;e<this.boardSize;e++){const e=[];for(let t=0;t<this.boardSize;t++)e.push(0);t.push(e)}return t}placeShip(t){for(const e of t){let o=0;const a=t.indexOf(e);let r=[];for(let t=0;t<e.length;t++)this.playerboard[o+t][a]=e.length,r.push([o+t,a]);o++,this.AddShipCoords(e,r)}}AddShipCoords(t,e){this.coordinates.set(t,e)}receiveAttack(t,e){console.log(t,e);for(let e=0;e<this.AttackStorage.length;e++)if(JSON.stringify(t)==JSON.stringify(this.AttackStorage[e]))return!1;const o=document.querySelector(".container").querySelector(`.${e}`);let a=!1;this.coordinates.forEach(((e,r)=>{e.forEach(((s,i)=>{s[0]===t[0]&&s[1]===t[1]&&(r.hit(),e.splice(i,1),this.checkSunk(),a=!0,o.querySelectorAll(".cell").forEach((e=>{const o=JSON.parse(e.getAttribute("data-coordinate"));o[0]===t[0]&&o[1]===t[1]&&(e.style.backgroundColor="red")})))}))})),a||(this.missedAttacks.push(t),o.querySelectorAll(".cell").forEach((e=>{const o=JSON.parse(e.getAttribute("data-coordinate"));o[0]===t[0]&&o[1]===t[1]&&(e.style.backgroundColor="blue")}))),this.AttackStorage.push(t)}checkSunk(){let t=!0;return this.coordinates.forEach((e=>{e.length>0&&(t=!1)})),t}}class e{constructor(t,e=0,o=!1){this.length=t,this.numOfHits=e,this.sunk=o}hit(){this.numOfHits!==this.length&&this.numOfHits++,this.numOfHits===this.length&&this.isSunk()}isSunk(){this.sunk=!0}}class o{constructor(o){this.word=o,this.gameBoard=new t(o),this.PlayerShips=[new e(5),new e(4),new e(3),new e(3),new e(2)]}attack(t){this.gameBoard.receiveAttack(t,this.word)}makeRandomAttack(t){const e=this.gameBoard.boardSize;let o,a=!0;for(;a;){o=[Math.floor(Math.random()*e),Math.floor(Math.random()*e)],a=!1;for(let t=0;t<this.gameBoard.AttackStorage.length;t++)if(JSON.stringify(o)===JSON.stringify(this.gameBoard.AttackStorage[t])){a=!0;break}}this.gameBoard.receiveAttack(o,t)}gameOver(){return this.gameBoard.checkSunk()}}const a=new o("one"),r=new o("two");function s(t){let e=document.querySelector(".container"),o=document.createElement("div");o.classList.add("grid",t),e.append(o);for(let t=0;t<10;t++){const e=[];for(let a=0;a<10;a++){const r=document.createElement("div");r.classList.add("cell"),r.setAttribute("data-coordinate",`[${t},${a}]`),o.appendChild(r),e.push(0)}}e.querySelector(".one").addEventListener("click",(t=>{const e=t.target.getAttribute("data-coordinate");o.classList.contains("one")?a.attack(JSON.parse(e,"one")):r.makeRandomAttack("two")}))}a.gameBoard.placeShip(a.PlayerShips),r.gameBoard.placeShip(r.PlayerShips),s("one"),s("two")})();